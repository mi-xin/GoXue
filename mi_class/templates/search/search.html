<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>首页-搜索</title>
     {% load static %}
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="/static/front_page/css/index.css">
    <script type="text/javascript" src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
    <link rel="shortcut icon" href="\GoXue\wenjian\img\favicon.ico">
</head>
<body>
    <div class="header">
    <img style="display:inline-block;width: 50px;height: 50px;margin-top: 3px" class="header_left" src="\GoXue\wenjian\img\网站logo.png">
    <span class="header_left"><a href={% url 'front_page:front_index' %}>首页</a></span>
    <span class="header_right">
                {% if request.user.is_authenticated %}
                    <span class="header_span"><a href="{% url  'mi_class:user_class' sign='all' %}">我的课程</a></span>
                    <span class="header_span "><a class="user_information"
                                                  href="{% url 'mi_user:user_information' %}">{{ request.user.username }}</a></span>
                {% else %}
                    <span  style="display: inline-block;margin-left: 10px"><a href="{% url 'mi_user:login' %}">登陆</a></span>
                    <span  style="display: inline-block;margin-left: 10px"><a href="{% url 'mi_user:register' %}">注册</a></span>
                {% endif %}
        <div class="infomation_slect">
        <ul>
            <li><a>个人中心</a></li>
            <li><a href="{% url 'mi_user:logout' %}">退出登陆</a></li>
        </ul>
    </div>
    </span>
    <div class="search_div">
       <form action="{% url 'haystack_search' %}" method="get">
           {% csrf_token %}
           <input type="text" placeholder="课程名/作者搜索课程" class="search_input" name="q"/>
           <button type="submit" class="search_btn">搜索</button>
       </form>
    </div>

</div>
<div class="content">
    <h2 class="index_title">推荐课程</h2>
    {% if query %}
    {% for i in page.object_list %}
        <div class="class_item">
            <a href="{% url 'mi_class:video_play_id' class_id=i.object.id %}">
            <img class="class_picture" src="{{ i.object.class_image.url }}" alt="课程封面" width="220px" height="124px"/></a>
            <spean class="class_title">{{ i.object.title }}</spean>
            <spean class="class_author">{{ i.object.author }}</spean>
        </div>
    {% empty %}
        <p>没有相关的课程呦，搜一搜其他的吧</p>
    {% endfor %}
    {% endif %}
    <div class="page_div">
        <ul class="pagination">
            {# 如果当前页还有上一页 #}
            {% if page.has_previous %}
                <li>
                    {# 点击a标签，跳转到上一页链接 ?index  为地址后面拼接的参数 #}
                    <a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">上一页</a>
                </li>
            {% else %}
                {# 如果没有上一页， 则上一页按钮不可点击 #}
                <li class="disabled">
                    <a href="#">上一页</a>
                </li>
            {% endif %}

            {% for page_number in paginator.page_range %}
                {# 获取当前页的页码 #}
                {% if page_number == page.number %}
                    {# 如果是当前页的话，选中 #}
                    <li class="active">
                        <a href="?q={{ query }}&amp;page={{ page_number }}">{{ page_number }}</a>
                    </li>
                {% else %}
                    <li>
                        <a href="?q={{ query }}&amp;page={{ page_number }}">{{ page_number }}</a>
                    </li>
                {% endif %}
            {% endfor %}
            {% if page.has_next %}
                <li>
                    <a href="?q={{ query }}&amp;page={{ page.next_page_number }}">下一页</a>
                </li>
            {% else %}
                <li class="disabled">
                    <a href="#">下一页</a>
                </li>
            {% endif %}
        </ul>
    </div>

</div>
<div class="footer">软件1731-肖沵鑫的毕业设计</div>

<script>
    $(document).ready(function () {
        $('.user_information').mouseover(function () {
            $('.infomation_slect').css('display', 'block')
        }).mouseout(function () {
            $('.infomation_slect').css('display', 'none')
        });
    })
</script>
</body>
</html>