<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>课程管理</title>
     <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>
<body>
    <div>
       <label>课程id</label> <input value="{{ lesson.id }}" name="class_id" id="class_id" ><br/>
         <label>课程名</label> <input value="{{ lesson.title }}" name="class_title" id="class_title"><br/>
        <label>课程简介</label> <textarea  name="class_introduce"  id="class_introduce">{{ lesson.introduce }}</textarea><br/>
         <label>课程作者</label> <input value="{{ lesson.author }}" name="class_author" id="class_author"><br/>
          <button type="button" id='sum'>确认修改</button>
        <label>课程视频</label><br/>

        {% for i in lesson.class_name.all %}
        {{ i.file_name }}  <button id="del">删除</button>
        <br/>

    {% endfor %}
    </div>
    </div>
<script>
    $(document).ready(function(){
        # 点击确认修改按钮更新课程数据
      $("#sum").click(function(){
          var class_id = $('#class_id').val()
          var class_title = $('#class_title').val()
          var class_author = $('#class_author').val()
          var class_introduce = $('#class_introduce').val()
          window.alert(class_id+' '+class_title+' '+class_author)
        $.ajax({
            url:"/user/class/damin",
             type:"POST",
            dataType:"json",
            data:{
                'class_id':class_id,
                'class_title':class_title,
                'class_introduce':class_introduce,
                'class_author':class_author,
                'sign':'update',  //修改信息
               'csrfmiddlewaretoken':'{{ csrf_token }}',
            },
            success:function (res) {
                pass
      }
        })
      });
        $('#del').click(function () {
            $.ajax({
                 url:"/user/class/damin",
             type:"POST",
            dataType:"json",
            data:{
                'sign':'del',  //删除视频
               'csrfmiddlewaretoken':'{{ csrf_token }}',
            },
            success:function (res) {
                pass
        }
            })

        })
    });
</script>
</body>
</html>