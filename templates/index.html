<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GO学-首页</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="/static/front_page/css/index.css">
    <script type="text/javascript" src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
</head>
<body>
<div class="header">
    <span class="header_left">这是图标的位置</span>
    <span class="header_right">
                {% if request.user.is_authenticated %}
                    <span class="header_span"><a href="{% url  'mi_class:user_class' sign='all' %}">我的课程</a></span>
                    <span class="header_span user_information">
                        <img style="width: 40px;height: 40px;border-radius: 50%" src={{ request.user.userotherinformtion.headImg.url  }}>
                        <a  href="{% url 'mi_user:user_information' %}">{{ request.user.username }}</a>
                        <ul class="infomation_slect">
                            <li><a>个人中心</a></li>
                            <li><a href="{% url 'mi_user:logout' %}">退出登陆</a></li>
                        </ul>
                    </span>
                {% else %}
                    <span><a href="{% url 'mi_user:login' %}">登陆</a></span>
                    <span><a href="{% url 'mi_user:register' %}">注册</a></span>
                {% endif %}
    </span>
    <div class="search_div">
       <form action="{% url 'haystack_search' %}" method="get">
           {% csrf_token %}
           <input type="text" placeholder="课程名/作者搜索课程" class="search_input" name="q"/>
           <button type="submit" class="search_btn">搜索</button>
       </form>
    </div>

</div>
<div class="content">
    <h2 class="index_title">推荐课程</h2>
    {% for i in page.object_list %}
        <div class="class_item">
            <a href="{% url 'mi_class:video_play_id' class_id=i.id %}">
            <img class="class_picture" src="{{ i.class_image.url }}" alt="课程封面" width="220px" height="124px"/></a>
            <spean class="class_title">{{ i.title }}</spean>
            <spean class="class_author">{{ i.author }}</spean>
        </div>
    {% endfor %}
    <div class="page_div">
        <ul class="pagination">
            {# 如果当前页还有上一页 #}
            {% if page.has_previous %}
                <li>
                    {# 点击a标签，跳转到上一页链接 ?index  为地址后面拼接的参数 #}
                    <a href="?index={{ page.previous_page_number }}">上一页</a>
                </li>
            {% else %}
                {# 如果没有上一页， 则上一页按钮不可点击 #}
                <li class="disabled">
                    <a href="#">上一页</a>
                </li>
            {% endif %}

            {% for page_number in paginator.page_range %}
                {# 获取当前页的页码 #}
                {% if page_number == page.number %}
                    {# 如果是当前页的话，选中 #}
                    <li class="active">
                        <a href="?index={{ page_number }}">{{ page_number }}</a>
                    </li>
                {% else %}
                    <li>
                        <a href="?index={{ page_number }}">{{ page_number }}</a>
                    </li>
                {% endif %}
            {% endfor %}
            {% if page.has_next %}
                <li>
                    <a href="?index={{ page.next_page_number }}">下一页</a>
                </li>
            {% else %}
                <li class="disabled">
                    <a href="#">下一页</a>
                </li>
            {% endif %}
        </ul>
    </div>

</div>
<div class="footer">软件1731-肖沵鑫的毕业设计<br/>
    171414337
</div>

<script>
    $(document).ready(function () {
        $('.user_information').hover(function () {
             $(this).children("ul").show()
        });
        $('.infomation_slect').mouseout(function () {
             $('.infomation_slect').hide()
        });
    })
</script>
</body>
</html>